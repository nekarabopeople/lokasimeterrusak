<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Lokasi Meter Rusak</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; text-align: center; padding: 20px; background: #f2f7ff; }
    h1 { color: #004B8D; }
    .output { margin: 15px 0; font-size: 18px; }
    button { padding: 10px 20px; margin: 5px; font-size: 16px; border: none; border-radius: 8px; cursor: pointer; }
    .get { background: #007bff; color: white; }
    .status { margin-top: 15px; font-size: 16px; color: #333; }
  </style>
</head>
<body>

  <h1>üìç Lokasi Meter Rusak</h1>

  <div class="output">
    <p><strong>Latitude:</strong> <span id="lat">-</span></p>
    <p><strong>Longitude:</strong> <span id="lng">-</span></p>
    <p><strong>Akurasi:</strong> <span id="accuracy">-</span></p>
    <p class="status" id="status">Silakan tekan tombol untuk mulai.</p>
  </div>

  <button class="get" onclick="getLocation()">üîÅ Dapatkan Lokasi</button>

  <script>
    let latitude = '', longitude = '', accuracy = '', coordsText = '';

    function getLocation() {
      document.getElementById("status").innerText = "Silakan berdiri di dekat meter untuk ambil lokasi akurat...";
      setTimeout(() => {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(pos => {
            latitude = pos.coords.latitude.toFixed(6);
            longitude = pos.coords.longitude.toFixed(6);
            accuracy = pos.coords.accuracy.toFixed(2);

            document.getElementById("lat").innerText = latitude;
            document.getElementById("lng").innerText = longitude;
            document.getElementById("accuracy").innerText = accuracy + ' meter';

            coordsText = `${latitude}, ${longitude}`;

            if (parseFloat(accuracy) <= 15) {
              document.getElementById("status").innerText = "üìå Lokasi akurat berhasil didapatkan.";
            } else {
              document.getElementById("status").innerText = "‚ö†Ô∏è Lokasi terdeteksi tapi akurasi di atas 15 meter.";
            }

            setTimeout(() => {
              navigator.clipboard.writeText(coordsText).then(() => {
                document.getElementById("status").innerText += "\n‚úÖ Koordinat berhasil disalin ke clipboard.";
              });
            }, 5000); // tunggu 5 detik sebelum auto-copy

          }, () => {
            document.getElementById("status").innerText = "‚ùå Gagal mendapatkan lokasi. Periksa izin browser.";
          }, {
            enableHighAccuracy: true,
            timeout: 10000
          });
        } else {
          document.getElementById("status").innerText = "‚ùå Browser tidak mendukung fitur lokasi.";
        }
      }, 5000); // tunggu 5 detik setelah klik tombol
    }
  </script>

</body>
</html>